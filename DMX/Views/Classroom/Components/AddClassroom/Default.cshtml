@model DMX.ViewModels.AddClassroomVM;

<!-- Modal Structure for Add Teacher -->
<div class="modal fade" id="AddTeacher" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h6>Add Teacher</h6>
                <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn btn-sm btn-outline-danger">Close</button>
            </div>

            @using (Html.BeginForm("AddTeacher", "Teacher", FormMethod.Post, new { id = "addTeacherForm" }))
            {
                <div class="modal-body">
                    <!-- Teacher Name Input -->
                    <div class="did-floating-label-content">
                        <input type="text" asp-for="@Model.Name" class="did-floating-input" placeholder="" required>
                        <label class="did-floating-label">Teacher Name</label>
                    </div>

                    <!-- Faculty ID Input -->
                    <div class="did-floating-label-content">
                        <input type="text" asp-for="@Model.Capacity" class="did-floating-input" placeholder="" required>
                        <label class="did-floating-label">Faculty ID</label>
                    </div>

                  
                </div>

                <!-- Modal Footer with Save Button -->
                <div class="modal-footer">
                    <button id="btnAddTeacher" class="btn btn-block btn-primary">Save</button>
                </div>
            }
        </div>
    </div>
</div>

<!-- JavaScript Code to Handle Form and Modal Behavior -->
<script>
    $(document).ready(function () {
        const modalSelector = '#AddTeacher';
        const addTeacherFormSelector = '#addTeacherForm';

        // Initialize Select2 (if needed)
        $('#selectTeacherUser').select2({
            dropdownParent: $(modalSelector)
        });

        // Handle modal shown event
        $(modalSelector).on('shown.bs.modal', function () {
            // Initialize TinyMCE or other plugins if needed
        });

        // Handle modal hidden event
        $(modalSelector).on('hidden.bs.modal', function () {
            // Reset the form and remove validation classes
            $(addTeacherFormSelector).trigger("reset");
            $(addTeacherFormSelector).find(".is-invalid").removeClass("is-invalid");
        });

        // Handle form submission
        $('#btnAddTeacher').click(function (event) {
            event.preventDefault();

            const form = $(addTeacherFormSelector)[0];
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            // Show confirmation dialog
            Swal.fire({
                title: 'Are you sure?',
                text: "Do you really want to save this record?",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, save it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    form.submit();
                }
            });
        });
    });
</script>